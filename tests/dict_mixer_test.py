#!/usr/bin/env python2.7
# -*- coding: utf-8 -*-
import unittest
import sys
import json
sys.path.append('../')
from request2doc import DictMixer, Request2Doc


class DictMixerTestCase(unittest.TestCase):
    def test_dict_mixer(self):
        data = '''
        {
          "error_code": 0,
          "message": "",
          "data": {
            "total_items": 64,
            "current_page": 1,
            "total_pages": 4,
            "results": [
              {
                "date": "2016-06-27 \u5468\u4e00",
                "homeworks": [
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "6-29 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1467016536840,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300004319915",
                    "close_time": 1467215940706,
                    "student_count": 4,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=5770e55880adb9443c8b4c99",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 2238,
                    "start_time_str": "6-27 16:35",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1467016536706,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u542c\u529b\u9009\u62e9\u9898(2)\u3001\u9009\u62e9\u9898(2)\u3001\u5199\u4f5c(2)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u666e\u901a\u4f5c\u4e1a123",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001479700",
                    "finished_count": 1,
                    "wait_crt_count": 0,
                    "_id": "5770e55880adb9443c8b4c99",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "Unit 1 Can you play the guitar?",
                    "redo_assign_status": 2,
                    "close_time_str": "6-29 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1467001421412,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300004317793",
                    "close_time": 1467215940207,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 240,
                    "start_time_str": "6-27 12:23",
                    "tags": [],
                    "start_time": 1467001421207,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 67,
                    "question_type_info": "\u8bcd\u6c47\u7ec3\u4e60(12)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u5355\u8bcd\u548c\u4f8b\u53e5",
                    "is_all_corrected": 1,
                    "wait_view_count": 1,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001479700",
                    "finished_count": 1,
                    "wait_crt_count": 0,
                    "_id": "5770aa4d80adb950378b4c6d",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "Unit 1 Can you play the guitar?",
                    "redo_assign_status": 2,
                    "close_time_str": "6-29 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1467000920886,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300004316431",
                    "close_time": 1467215940685,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 90,
                    "start_time_str": "6-27 12:15",
                    "tags": [],
                    "start_time": 1467000920685,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 33,
                    "question_type_info": "\u8bcd\u6c47\u7ec3\u4e60(6)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u5355\u8bcd\u8bcd\u6c47",
                    "is_all_corrected": 1,
                    "wait_view_count": 1,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001479700",
                    "finished_count": 1,
                    "wait_crt_count": 0,
                    "_id": "5770a85880adb9de378b4c73",
                    "real_clazz_id": 33721224
                  }
                ]
              },
              {
                "date": "2016-06-17",
                "homeworks": [
                  {
                    "subtitle": "Unit 10 I've had this bike for three years.",
                    "redo_assign_status": 2,
                    "close_time_str": "6-19 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u516d\u5e74\u7ea71\u73ed",
                    "create_time": 1466129712000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300003735270",
                    "close_time": 1466351940000,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=57635d54ad73936409000045",
                    "clazz_id": 10949,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 40,
                    "start_time_str": "6-17 10:14",
                    "tags": [],
                    "start_time": 1466129665000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9009\u62e9\u9898(1)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u4f5c\u4e1a 06-17",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "57635d54ad73936409000045",
                    "real_clazz_id": 829966
                  }
                ]
              },
              {
                "date": "2016-05-20",
                "homeworks": [
                  {
                    "subtitle": "Section A (1a\u20142d)",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463745261000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002928192",
                    "close_time": 1463932740000,
                    "student_count": 4,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573efaed80adb9a03a8b4647",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 2680,
                    "start_time_str": "5-20 19:54",
                    "tags": [],
                    "start_time": 1463745260000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u6c49\u8bd1\u82f1(10)\u3001\u6839\u636e\u53e5\u610f\u53ca\u9996\u5b57\u6bcd\u6216\u6c49\u8bed\u63d0\u793a\u5b8c\u6210\u53e5\u5b50(5)\u3001\u6839\u636e\u6c49\u8bed\u610f\u601d\u5b8c\u6210\u53e5\u5b50(6)\u3001\u5355\u9879\u9009\u62e9(10)\u3001\u7528\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u586b\u7a7a(5)\u3001\u7528\u65b9\u6846\u4e2d\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u5b8c\u6210\u77ed\u6587(7)\u3001\u7528\u9002\u5f53\u7684\u53e5\u5b50\u8865\u5168\u5bf9\u8bdd(5)\u3001\u6309\u8981\u6c42\u5b8c\u6210\u4e0b\u5217\u5404\u9898\uff0c\u6bcf\u7a7a\u4e00\u8bcd(4)\u3001\u5b8c\u5f62\u586b\u7a7a(10)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u5168\u54c1\u4f5c\u4e1a\u672c-\u82f1\u8bed(\u65b0\u76ee\u6807)\u516b\u5e74\u7ea7\u4e0a\u518c-\u65b0\u8bfe\u6807(RJ) 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001480836",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573efaed80adb9a03a8b4647",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "Section A (1a\u20142d)",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463745261000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002928192",
                    "close_time": 1463932740000,
                    "student_count": 20,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573efaed80adb9a03a8b4646",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 2680,
                    "start_time_str": "5-20 19:54",
                    "tags": [],
                    "start_time": 1463745260000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u6c49\u8bd1\u82f1(10)\u3001\u6839\u636e\u53e5\u610f\u53ca\u9996\u5b57\u6bcd\u6216\u6c49\u8bed\u63d0\u793a\u5b8c\u6210\u53e5\u5b50(5)\u3001\u6839\u636e\u6c49\u8bed\u610f\u601d\u5b8c\u6210\u53e5\u5b50(6)\u3001\u5355\u9879\u9009\u62e9(10)\u3001\u7528\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u586b\u7a7a(5)\u3001\u7528\u65b9\u6846\u4e2d\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u5b8c\u6210\u77ed\u6587(7)\u3001\u7528\u9002\u5f53\u7684\u53e5\u5b50\u8865\u5168\u5bf9\u8bdd(5)\u3001\u6309\u8981\u6c42\u5b8c\u6210\u4e0b\u5217\u5404\u9898\uff0c\u6bcf\u7a7a\u4e00\u8bcd(4)\u3001\u5b8c\u5f62\u586b\u7a7a(10)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u5168\u54c1\u4f5c\u4e1a\u672c-\u82f1\u8bed(\u65b0\u76ee\u6807)\u516b\u5e74\u7ea7\u4e0a\u518c-\u65b0\u8bfe\u6807(RJ) 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001480836",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573efaed80adb9a03a8b4646",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "Section A (1a\u20142d)",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463741234000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002925859",
                    "close_time": 1463932740000,
                    "student_count": 4,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573eeb3280adb9fb398b464b",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 2680,
                    "start_time_str": "5-20 18:47",
                    "tags": [],
                    "start_time": 1463741233000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u6c49\u8bd1\u82f1(10)\u3001\u6839\u636e\u53e5\u610f\u53ca\u9996\u5b57\u6bcd\u6216\u6c49\u8bed\u63d0\u793a\u5b8c\u6210\u53e5\u5b50(5)\u3001\u6839\u636e\u6c49\u8bed\u610f\u601d\u5b8c\u6210\u53e5\u5b50(6)\u3001\u5355\u9879\u9009\u62e9(10)\u3001\u7528\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u586b\u7a7a(5)\u3001\u7528\u65b9\u6846\u4e2d\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u5b8c\u6210\u77ed\u6587(7)\u3001\u7528\u9002\u5f53\u7684\u53e5\u5b50\u8865\u5168\u5bf9\u8bdd(5)\u3001\u6309\u8981\u6c42\u5b8c\u6210\u4e0b\u5217\u5404\u9898\uff0c\u6bcf\u7a7a\u4e00\u8bcd(4)\u3001\u5b8c\u5f62\u586b\u7a7a(10)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u5168\u54c1\u4f5c\u4e1a\u672c-\u82f1\u8bed(\u65b0\u76ee\u6807)\u516b\u5e74\u7ea7\u4e0a\u518c-\u65b0\u8bfe\u6807(RJ) 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001480836",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573eeb3280adb9fb398b464b",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "Section A (1a\u20142d)",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463741233000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002925859",
                    "close_time": 1463932740000,
                    "student_count": 20,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573eeb3180adb9fb398b464a",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 2680,
                    "start_time_str": "5-20 18:47",
                    "tags": [],
                    "start_time": 1463741233000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u6c49\u8bd1\u82f1(10)\u3001\u6839\u636e\u53e5\u610f\u53ca\u9996\u5b57\u6bcd\u6216\u6c49\u8bed\u63d0\u793a\u5b8c\u6210\u53e5\u5b50(5)\u3001\u6839\u636e\u6c49\u8bed\u610f\u601d\u5b8c\u6210\u53e5\u5b50(6)\u3001\u5355\u9879\u9009\u62e9(10)\u3001\u7528\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u586b\u7a7a(5)\u3001\u7528\u65b9\u6846\u4e2d\u6240\u7ed9\u8bcd\u7684\u9002\u5f53\u5f62\u5f0f\u5b8c\u6210\u77ed\u6587(7)\u3001\u7528\u9002\u5f53\u7684\u53e5\u5b50\u8865\u5168\u5bf9\u8bdd(5)\u3001\u6309\u8981\u6c42\u5b8c\u6210\u4e0b\u5217\u5404\u9898\uff0c\u6bcf\u7a7a\u4e00\u8bcd(4)\u3001\u5b8c\u5f62\u586b\u7a7a(10)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u5168\u54c1\u4f5c\u4e1a\u672c-\u82f1\u8bed(\u65b0\u76ee\u6807)\u516b\u5e74\u7ea7\u4e0a\u518c-\u65b0\u8bfe\u6807(RJ) 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001480836",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573eeb3180adb9fb398b464a",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60\u3001Section A (1a\u20142d)",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463739512000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002924149",
                    "close_time": 1463932740000,
                    "student_count": 4,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573ee47880adb9423a8b465d",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 470,
                    "start_time_str": "5-20 18:18",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463739511000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u8bcd\u6c47\u7ec3\u4e60(30)\u3001\u6c49\u8bd1\u82f1(3)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573ee47880adb9423a8b465d",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60\u3001Section A (1a\u20142d)",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463739512000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002924149",
                    "close_time": 1463932740000,
                    "student_count": 20,
                    "include_subjective": 1,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573ee47880adb9423a8b465c",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "enable_check": true,
                    "expect_duration": 470,
                    "start_time_str": "5-20 18:18",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463739511000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u8bcd\u6c47\u7ec3\u4e60(30)\u3001\u6c49\u8bd1\u82f1(3)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573ee47880adb9423a8b465c",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463739012000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002923294",
                    "close_time": 1463932740000,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573ee28480adb99e3a8b463e",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 80,
                    "start_time_str": "5-20 18:10",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463739011000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9009\u62e9\u9898(2)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573ee28480adb99e3a8b463e",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463739011000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002923294",
                    "close_time": 1463932740000,
                    "student_count": 20,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573ee28380adb99e3a8b463d",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 80,
                    "start_time_str": "5-20 18:10",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463739011000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9009\u62e9\u9898(2)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573ee28380adb99e3a8b463d",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "Unit 10 I've had this bike for three years.",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463737520000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002922013",
                    "close_time": 1463932740000,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573edcb080adb9fb398b4646",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 80,
                    "start_time_str": "5-20 17:45",
                    "tags": [],
                    "start_time": 1463737519000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9009\u62e9\u9898(2)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573edcb080adb9fb398b4646",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "Unit 10 I've had this bike for three years.",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463737519000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002922013",
                    "close_time": 1463932740000,
                    "student_count": 20,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573edcaf80adb9fb398b4645",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 80,
                    "start_time_str": "5-20 17:45",
                    "tags": [],
                    "start_time": 1463737519000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9009\u62e9\u9898(2)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573edcaf80adb9fb398b4645",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463725366000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002918793",
                    "close_time": 1463932740000,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573ead3680adb9413a8b4640",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 300,
                    "start_time_str": "5-20 14:22",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463725365000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9605\u8bfb\u7406\u89e3(1)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573ead3680adb9413a8b4640",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-22 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463725366000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002918793",
                    "close_time": 1463932740000,
                    "student_count": 20,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573ead3680adb9413a8b463f",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 300,
                    "start_time_str": "5-20 14:22",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463725365000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9605\u8bfb\u7406\u89e3(1)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573ead3680adb9413a8b463f",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-20 14:18",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463724550000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002917098",
                    "close_time": 1463725080000,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573eaa0680adb99d3a8b4634",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "update_time": 1463724978000,
                    "enable_check": false,
                    "expect_duration": 300,
                    "start_time_str": "5-20 14:09",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463724549000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u9605\u8bfb\u7406\u89e3(1)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573eaa0680adb99d3a8b4634",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-20 14:16",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463724549000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002917098",
                    "close_time": 1463724960000,
                    "student_count": 20,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "/teacher/homework/downloadPaper?homework_id=573eaa0580adb99d3a8b4633",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "update_time": 1463724960000,
                    "enable_check": false,
                    "expect_duration": 300,
                    "start_time_str": "5-20 14:09",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463724549000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 60,
                    "question_type_info": "\u9605\u8bfb\u7406\u89e3(1)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 1,
                    "wait_crt_count": 0,
                    "_id": "573eaa0580adb99d3a8b4633",
                    "real_clazz_id": 33721223
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-21 23:59",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea72\u73ed",
                    "create_time": 1463718610000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002916782",
                    "close_time": 1463846340000,
                    "student_count": 4,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "",
                    "clazz_id": 12941,
                    "type": 3,
                    "status": 5,
                    "enable_check": false,
                    "expect_duration": 350,
                    "start_time_str": "5-20 12:30",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463718608000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 0,
                    "question_type_info": "\u8bcd\u6c47\u7ec3\u4e60(30)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 0,
                    "wait_crt_count": 0,
                    "_id": "573e92d280adb9373a8b4635",
                    "real_clazz_id": 33721224
                  },
                  {
                    "subtitle": "\u671f\u672b\u590d\u4e60",
                    "redo_assign_status": 2,
                    "close_time_str": "5-20 17:21",
                    "is_overtime": 1,
                    "clazz_name": "\u4e03\u5e74\u7ea71\u73ed",
                    "create_time": 1463718609000,
                    "redo_button_status": 0,
                    "paper_id": "PM_20300002916782",
                    "close_time": 1463736060000,
                    "student_count": 20,
                    "include_subjective": 0,
                    "subject_id": 3,
                    "crt_count": 0,
                    "download_url": "",
                    "clazz_id": 10951,
                    "type": 3,
                    "status": 5,
                    "update_time": 1463736045000,
                    "enable_check": false,
                    "expect_duration": 350,
                    "start_time_str": "5-20 12:30",
                    "tags": [
                      "final"
                    ],
                    "start_time": 1463718608000,
                    "is_comment_setted": 0,
                    "open_answer_time": null,
                    "avg_score": 87,
                    "question_type_info": "\u8bcd\u6c47\u7ec3\u4e60(30)",
                    "redo_homework": "",
                    "teacher_id": 126685,
                    "name": "\u82f1\u8bed\u671f\u672b\u590d\u4e60\u4f5c\u4e1a 05-20",
                    "is_all_corrected": 1,
                    "wait_view_count": 0,
                    "is_all_student_finished": 0,
                    "book_id": "BK_20300001481320",
                    "finished_count": 1,
                    "wait_crt_count": 0,
                    "_id": "573e92d180adb9373a8b4634",
                    "real_clazz_id": 33721223
                  }
                ]
              }
            ],
            "page_size": 20
          },
          "success": true
        }
        '''
        dic = json.loads(data)
        mixer = DictMixer(dic)
        result = mixer.expand_item_list()
        print result

        # self.assertEqual(result[0].full_key(), 'a.b.0')
        # self.assertEqual(result[1].full_key(), 'a.b.1.e')
        # self.assertEqual(result[2].full_key(), 'a.b.1.d')
        # self.assertEqual(result[3].full_key(), 'a.b1.0')

        for item in mixer.expand_item_list():
            print item

        mixer.replace_similar_items_route()
        print "== before merge =="
        for item in mixer.expand_item_list():
            print item

        mixer.merge_items()
        print "== after merge =="
        for item in mixer.expand_item_list():
            print item

    def test_request2doc(self):
        md = Request2Doc('http://zxlocal.test.17zuoye.net/teacher/homework/search', 'GET', {'status': 0})
        md.set_cookie_jar('D:\\coding\\request2doc\\cookiejar')
        print md.request()
        print md.response_body
        print md.render_string('../markup.tpl')

if __name__ == '__main__':
    unittest.main()
